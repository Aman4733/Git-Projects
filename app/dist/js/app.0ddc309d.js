(function(t){function e(e){for(var s,r,o=e[0],c=e[1],u=e[2],l=0,h=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},a={app:0},i=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=c;i.push([8,"chunk-vendors"]),n()})({0:function(t,e){},"034f":function(t,e,n){"use strict";n("85ec")},"0eba":function(t,e,n){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},2:function(t,e){},3:function(t,e){},"3e17":function(t,e,n){"use strict";n("0eba")},"3f35":function(t,e,n){"use strict";n("5fa8")},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),n("div",{staticClass:"wrapper"},[n("router-view")],1)],1)},i=[],r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("h1",{staticClass:"is-size-1 has-text-centered has-text-white"},[t._v("Create Your Story")])])}],c=(n("80d2"),n("2877")),u={},d=Object(c["a"])(u,r,o,!1,null,"6e766d44",null),l=d.exports,h={name:"App",components:{Nav:l}},f=h,v=(n("034f"),Object(c["a"])(f,a,i,!1,null,null,null)),m=v.exports,p=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("p",{staticClass:"is-size-3 has-text-white has-text-centered"},[t._v(" "+t._s(t.message)+" ")]),n("p",{staticClass:"is-size-3 has-text-white has-text-centered"},[t._v(" "+t._s(t.seconds)+" ")]),n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"columns is-centered"},[n("div",{attrs:{id:"canvas-wrapper column is-half"}},[n("p",{staticClass:"has-text-black is-size-3"},[t._v("Video Here")]),n("canvas",{ref:"output",attrs:{id:"output"}}),n("video",{ref:"video",staticStyle:{"-webkit-transform":"scaleX(-1)",transform:"scaleX(-1)",visibility:"hidden",width:"auto",height:"auto",position:"absolute"},attrs:{id:"video",playsinline:""}})]),t.ready?n("div",{staticClass:"column is-half"},[n("p",{staticClass:"has-text-white is-size-3"},[t._v(t._s(t.text))]),n("canvas",{ref:"shadowCanvas",staticClass:"has-background-black-bis",attrs:{id:"shadowCanvas"}})]):t._e()]),t.ready?n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-one-fifth"}),n("div",{staticClass:"column is-one-fifth"},[n("button",{staticClass:"button is-medium mx-10 is-size-4",on:{click:function(e){return t.start()}}},[t._v(" Start Recording ")])]),n("div",{staticClass:"column is-one-fifth"},[n("button",{staticClass:"button is-medium mx-10 is-size-4",on:{click:function(e){return t.stop()}}},[t._v(" Stop Recording ")])]),n("div",{staticClass:"column is-one-fifth"},[n("button",{staticClass:"button is-medium mx-10 is-size-4",on:{click:function(e){return t.download()}}},[t._v(" Play Recording ")])]),n("div",{staticClass:"column is-one-fifth"})]):t._e()])]),n("hr"),n("div",{staticClass:"container"},[n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-one-quarter"}),t.isStart?t._e():n("div",{staticClass:"column is-half",attrs:{id:"story"}},t._l(t.story,(function(e){return n("span",{key:e,staticClass:"has-text-centered has-text-white is-size-3",attrs:{id:"storyText"}},[t._v(t._s(e)+" ")])})),0),n("div",{staticClass:"column is-one-quarter"})])])])},g=[],b=(n("cb29"),n("d81d"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),x=n("2d10"),C=n("ce1a"),y=n("743c"),k=n("2d28"),_=n("8d7f"),O=n("bc3a"),S=n.n(O),R=640,j=500,P={data:function(){return{backend:"webgl",canvas:null,time:"00:00",seconds:0,isStart:!1,updateTime:null,shadowCanvas:null,message:"Loading...",ready:!1,video:null,ctx:null,sctx:null,tctx:null,model:null,timer:"",vieoWidth:null,videoHeight:null,fingerLookupIndices:{thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]},palmLookupIndices:{palm:[0,1,5,9,13,17,0,1]},chunks:[],recorder:null,recognizer:null,text:"Show Me A Story",story:[]}},watch:{seconds:function(){var t=this.seconds%60,e=(this.seconds-t)/60;this.time=(t>=10?t:"0"+t)+":"+(e>=10?e:"0"+e),this.seconds>=3600&&this.stop}},methods:{start:function(){var t=this,e=document.getElementById("story");while(e.firstChild)e.removeChild(e.lastChild);if(!this.isStart){this.isStart=!0,this.story=[],this.seconds=0,this.startTime(),this.startAudioTranscription(),this.chunks=[];var n=this.shadowCanvas.captureStream(60);this.recorder=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp9"}),this.recorder.ondataavailable=function(e){t.chunks.push(e.data)},this.recorder.start(500)}},stop:function(){this.isStart&&(this.isStart=!1,this.clearSet(),this.recorder&&(this.recorder.stop(),this.recognizer.stopContinuousRecognitionAsync(),this.recorder=null))},download:function(){if(this.seconds=0,0!=this.chunks.length){var t=document.createElement("video"),e=new Blob(this.chunks),n=window.URL.createObjectURL(e);t.src=n,document.getElementById("story").appendChild(t),t.autoplay=!0,t.controls=!0}},startTime:function(){var t=this;this.updateTime=setInterval((function(){t.seconds++}),1e3)},clearSet:function(){clearInterval(this.updateTime)},drawPoint:function(t,e,n,s,a){t.beginPath(),t.arc(s,n,a,0,2*Math.PI),t.fill()},drawKeypoints:function(t,e,n){for(var s=n,a=0;a<s.length;a++){var i=s[a][0],r=s[a][1];this.drawPoint(t,e,r-2,i-2,3)}for(var o=Object.keys(this.fingerLookupIndices),c=0;c<o.length;c++){var u=o[c],d=this.fingerLookupIndices[u].map((function(t){return n[t]}));this.drawPath(t,e,d,!1)}for(var l=Object.keys(this.palmLookupIndices),h=0;h<l.length;h++){var f=l[h],v=this.palmLookupIndices[f].map((function(t){return n[t]}));this.drawPath(t,e,v,!0)}},drawPath:function(t,e,n,s){for(var a=new Path2D,i=1;i<n.length;i++){var r=n[i];a.lineTo(r[0],r[1])}s&&a.closePath(),t.stroke(a),e.stroke(a),e.fill(a,"nonzero")},frameLandmarks:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.ctx.drawImage(t.video,0,0,t.videoWidth,t.videoHeight,0,0,t.canvas.width,t.canvas.height),n=new Image,n.src="@/assets/images/blank.svg",t.sctx.fillRect(0,0,t.shadowCanvas.width,t.shadowCanvas.height),t.sctx.drawImage(n,0,0,t.videoWidth,t.videoHeight,0,0,t.shadowCanvas.width,t.shadowCanvas.height),e.next=7,t.model.estimateHands(t.video);case 7:s=e.sent,s.length>0&&(a=s[0].landmarks,t.drawKeypoints(t.ctx,t.sctx,a,s[0].annotations)),requestAnimationFrame(t.frameLandmarks);case 10:case"end":return e.stop()}}),e)})))()},landmarksRealTime:function(t){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.videoWidth=t.videoWidth,e.videoHeight=t.videoHeight,e.canvas=e.$refs.output,e.canvas.width=e.videoWidth,e.canvas.height=e.videoHeight,e.shadowCanvas=e.$refs.shadowCanvas,e.shadowCanvas.width=e.videoWidth,e.shadowCanvas.height=e.videoHeight,e.ctx=e.canvas.getContext("2d"),e.sctx=e.shadowCanvas.getContext("2d"),t.width=e.videoWidth,t.height=e.videoHeight,e.ctx.clearRect(0,0,e.videoWidth,e.videoHeight),e.ctx.strokeStyle="red",e.ctx.fillStyle="red",e.ctx.translate(e.shadowCanvas.width,0),e.ctx.scale(-1,1),e.sctx.clearRect(0,0,e.videoWidth,e.videoHeight),e.sctx.shadowColor="black",e.sctx.shadowBlur=20,e.sctx.shadowOffsetX=150,e.sctx.shadowOffsetY=150,e.sctx.lineWidth=20,e.sctx.lineCap="round",e.sctx.fillStyle="white",e.sctx.strokeStyle="white",e.sctx.translate(e.shadowCanvas.width,0),e.sctx.scale(-1,1),e.frameLandmarks();case 29:case"end":return n.stop()}}),n)})))()},setupCamera:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return t.video=t.$refs.video,e.next=5,navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:R,height:j}});case 5:return n=e.sent,e.abrupt("return",new Promise((function(e){t.video.srcObject=n,t.video.onloadedmetadata=function(){e(t.video)}})));case 7:case"end":return e.stop()}}),e)})))()},loadVideo:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.setupCamera();case 2:return n=e.sent,t.message="Video is loaded!",n.play(),t.message,t.ready=!0,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},startAudioTranscription:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/api/getKey");case 3:n=e.sent,t.subKey=n.data,s=y["a"].fromSubscription(t.subKey,"centralindia"),a=k["a"].fromDefaultMicrophoneInput(),t.recognizer=new _["a"](s,a),t.recognizer.recognized=function(e,n){t.text=n.result.text,t.story.push(t.text)},t.recognizer.startContinuousRecognitionAsync(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),t.message=e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}},mounted:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C["a"](t.backend);case 2:return e.next=4,x["a"]();case 4:return t.model=e.sent,t.message="Model is loaded! Now loading video",e.prev=6,e.next=9,t.loadVideo();case 9:n=e.sent,e.next=16;break;case 12:throw e.prev=12,e.t0=e["catch"](6),t.message=e.t0.message,e.t0;case 16:t.landmarksRealTime(n);case 17:case"end":return e.stop()}}),e,null,[[6,12]])})))()}},z=P,I=(n("3f35"),Object(c["a"])(z,w,g,!1,null,null,null)),T=I.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-body is-large"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"has-text-white-ter is-size-1 has-text-centered"},[t._v(" Interactive Show ")]),t._m(0),n("h2",{staticClass:"has-text-centered"},[n("router-link",{attrs:{to:"/show"}},[n("h2",{staticClass:"is-size-2"},[t._v("Enter Here")])])],1)])])])},M=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"has-text-centered"},[s("img",{attrs:{src:n("cb67")}})])}],L={name:"Home"},E=L,W=(n("3e17"),Object(c["a"])(E,H,M,!1,null,"02b343a2",null)),$=W.exports;s["a"].use(p["a"]);var A=new p["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:$},{path:"/show",name:"show",component:T}]}),D=A;s["a"].config.productionTip=!1,new s["a"]({router:D,render:function(t){return t(m)}}).$mount("#app")},"5fa8":function(t,e,n){},6:function(t,e){},7:function(t,e){},8:function(t,e,n){t.exports=n("56d7")},"80d2":function(t,e,n){"use strict";n("9ef5")},"85ec":function(t,e,n){},9:function(t,e){},"9ef5":function(t,e,n){},cb67:function(t,e,n){t.exports=n.p+"img/bird-shadow.2bf3936f.jpg"}});
//# sourceMappingURL=app.0ddc309d.js.map